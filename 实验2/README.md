# 实验 2 数据定义

**一、实验目的**

1. 了解 SQL Server 的层次化命名空间
1. 掌握模式（架构）的定义和删除方法
1. 掌握基本表的定义、修改和删除方法
1. 掌握索引的定义、修改和删除方法

**二、实验环境**

1. PC 机（CPU 主频 2.0GHz 以上，4G 以上内存，80GB 以上硬盘空间）
1. Win 7 或 Win 10 操作系统
1. SQL Server 2008（或以上版本）  

**三、实验内容**  

有以下 3 个关系模式：

| **银行（Bank）** |                                   |                |
| ---------------- | --------------------------------- | -------------- |
| **属性名**       | **数据类型**                      | **说明**       |
| Bno              | 定长字符串，长度 5                | 银行编号，主键 |
| Bname            | 变长字符串，Unicode 编码，长度 10 | 银行名称       |
| Btel             | 定长字符串，长度 8                | 联系电话       |

| **法人（LegalEntity）** |                                   |                |
| ----------------------- | --------------------------------- | -------------- |
| **属性名**              | **数据类型**                      | **说明**       |
| Eno                     | 定长字符串，长度 3                | 银行编号，主键 |
| Ename                   | 变长字符串，Unicode 编码，长度 15 | 银行名称       |
| Enature                 | 定长字符串，Unicode 编码，长度 2  | 经济性质       |
| Ecapital                | 整型                              | 注册资金       |
| Erep                    | 变长字符串，Unicode 编码，长度 4  | 法人代表       |

| **贷款记录（Loan）** |                    |                                |
| -------------------- | ------------------ | ------------------------------ |
| **属性名**           | **数据类型**       | **说明**                       |
| Eno                  | 定长字符串，长度 3 | 银行编号，主键，参照关系“法人” |
| Bno                  | 定长字符串，长度 5 | 银行编号，主键，参照关系“银行” |
| Ldate                | 时间日期           | 放贷日期，主键                 |
| Lamount              | 整型               | 贷款金额                       |
| Lyear                | 整型               | 贷款年限                       |

请完成以下任务：  
**1．创建模式**  
创建模式“Bank_Loan”，并授权给用户“dbo”

**2．创建基本表**  
在模式“Bank_Loan”中，使用 SSMS 的设计器创建关系表“银行”，并使用 SQL 语句创建关系表“法人”和“贷款记录”。

**3．模式操作**  
使用 SSMS 将以上基本表的模式修改为默认模式“dbo”，并将模式“Bank_Loan”删除。

**4．基本表操作**  
完成以下操作：

1. 编写 SQL 语句，将关系“贷款记录”的 Ldate 属性的数据类型改为 smalldatetime
1. 编写 SQL 语句，在关系“贷款记录”中添加属性 Lterm（贷款截止日期），数据类型为 smalldatetime
1. 编写 SQL 语句，删除“贷款记录”中的属性 Lyear
1. 删除原有的关系表“贷款记录”，并按上述修改后的结果，重新创建一张关系表“贷款记录”
